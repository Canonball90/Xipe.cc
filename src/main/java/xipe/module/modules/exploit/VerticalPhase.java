package xipe.module.modules.exploit;

import net.minecraft.client.util.math.MatrixStack;
import net.minecraft.entity.EntityPose;
import net.minecraft.util.math.Vec3d;
import xipe.module.Mod;

public class VerticalPhase extends Mod{
	
	 Vec3d startPos = null;
	 float fspeed;

	public VerticalPhase() {
		super("VerticalPhase", "Phases inside blocks", Category.EXPLOIT);
	}
	
	@Override
	public void onTick() {
		 Vec3d ppos = mc.player.getPos();
	        if (mc.options.jumpKey.isPressed()) {
	        	mc.player.updatePosition(startPos.x, ppos.y + 0.05, startPos.z);
	        }
	        if (mc.options.sneakKey.isPressed()) {
	        	mc.player.updatePosition(startPos.x, ppos.y - 0.05, startPos.z);
	        }
		super.onTick();
	}
	
	@Override
	public void onEnable() {
		startPos = mc.player.getPos();
        fspeed = mc.player.getAbilities().getFlySpeed();
        mc.player.getAbilities().setFlySpeed(0);
		super.onEnable();
	}
	
	@Override
	public void onDisable() {
		mc.player.noClip = false;
        mc.player.getAbilities().flying = false;
        mc.player.getAbilities().setFlySpeed(fspeed);
        Vec3d ppos =mc.player.getPos();
        mc.player.updatePosition(ppos.x, ppos.y, ppos.z);
		super.onDisable();
	}
	
	@Override
	public void onWorldRender(MatrixStack matrices) {
		mc.player.noClip = true;
        mc.player.getAbilities().flying = true;
        Vec3d p = mc.player.getPos();
        mc.player.updatePosition(startPos.x, p.y, startPos.z);
        mc.player.setVelocity(0, 0, 0);
        mc.player.setSwimming(false);
        mc.player.setPose(EntityPose.STANDING);
		super.onWorldRender(matrices);
	}

}
